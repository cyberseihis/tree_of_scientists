Εκτελέσιμο

Το αρχείο Demo είναι ένα εκτελέσιμο για linux. Το Demo δέχεται σε μια γραμμή το ελάχιστο και μέγιστο γράμμα που μπορεί να αρχίζει
το όνομα του επιστήμονα και το ελάχιστο και μέγιστο αριθμό βραβείων που μπορεί να έχει, με αυτή τη σειρά, και τυπώνει τα
ζεύγη επιστημόνων που πληρούν αυτά τα κριτήρια και έχουν ομοιότητα στην εκπαίδευση >20%.

Παράδειγμα

Τα δέντρα αποθηκεύουν πληροφορία σε μορφή Point. Ένα Point περιέχει δυο νούμερα x και y που δηλώνουν το πρώτο γράμμα του ονόματος
και τον αριθμό βραβείων και μια λίστα stuff με δείκτες προς τους επιστήμονες που περιγραφει.
Επίσης καταγραφουν σε ποια από τις δυο διαστάσεις πρέπει να συγκριθούν μεταξύ τους.

Τα τέσσερα είδη δέντρων (Kdtree,Qtree,RangeTree,R-Tree) συγκριθηκαν ως προς την ταχύτητα στο range querry.
Το Kdtree αποδείχτηκε το πιο γρήγορο και χρησιμοποιήθηκε στο Demo.
Οι δείκτες προς τους επιστήμονες αντιστοιχίζονται σε προϋπολογισμένες υπογραφές LSH και βρίσκονται τα ζεύγη που
καταλήγουν στον ίδιο κουβα σε τουλάχιστον ένα band. Στη συνεχεια φιλτράρονται έτσι ώστε το jaccard similarity τους
να είναι >20%. Αυτό γίνεται με προϋπολογισμένα σύνολα από hash λέξεων τις εκπαίδευσης.
Τέλος τυπώνεται το επώνυμο και αριθμός βραβείων για κάθε επιστήμονα του ζεύγους.

Περιγραφή δέντρων

Κάθε δέντρο έχει μια συναρτήση κατασκευής που δέχεται μια λίστα με Point και φτιάχνει ένα δέντρο που τα περιέχει
και μια συνάρτηση για range query που δέχεται δυο Point που αναπαριστούν το ελάχιστο και μέγιστο σημείο του range
και το δέντρο και επιστρέφει όλα τα Point στο δέντρο που περιλαμβάνονται στο range. Αυτά τα δυο Point θα αναφέρονται ως
low και high αντίστοιχα.

Kdtree

Κατασκευή : Οι τιμές αποθηκεύονται στα φύλλα. Τα Point χωρίζονται αριστερά και δεξιά με βάση το αν είναι 
μικρότερα / ισα η μεγαλύτερα από το μέσο ορο των Point τις λίστας. Ο κόμβος αποκτά τι τιμή του μέσου ορου τον Point.
Στη συνεχεια για κάθε κατεύθινση η κατασκευή επαναλαμβάνεται με τη σύγκριση να γίνεται σε διαφορετική διάσταση από το προηγούμενο επίπεδο.
Όταν μένει μονο ένα Point στη list δημιουργείται φύλλο.

Αναζήτηση : Η αναζήτηση σε φίλο επιστρέφει τι τιμή του φύλλου αν είναι εντός του range. Η αναζήτηση σε κόμβο επιστρέφει την ένωση
τις αναζήτησης στο αριστερό παιδί αν ο κόμβος είναι μεγαλύτερος του low και στο δεξί αν είναι μικρότερος του high.
Η διάσταση στην οποια γίνεται η σύγκριση αλλάζει κάθε επίπεδο.

QuadTree

Κατασκευή : Τα Point χωρίζονται στα 4 με βάση σε ποιο τεταρτημόριο βρίσκονται σε σχέση με το μέσο Point και ένα υποδεντρο 
δημιουργείται για κάθε τεταρτημόριο.

Αναζήτηση : Επιστρέφεται η ένωση τον αναζητήσεων στα υπόδεντρα που αντιστοιχούν σε όλα τα τεταρτημόρια που βρίσκεται
κάποια γωνια του ορθογώνιου που ορίζει το range.

RangeTree 

Κατασκευή : Στο δέντρο τις πρώτης διάστασης κάθε κόμβος χωρίζει τα Point σε δεξιά και αριστερά υπόδεντρα με βάση σύγκριση με το
μέσο Point στην πρώτη διάσταση και επίσης περνάει όλα τα Point σε ένα κάθετο υποδεντρο για σύγκριση στην άλλη διάσταση. Το δέντρο 
μπορεί να μην είναι ισοζυγισμένο σε κάποιες περιπτώσεις λόγω του ότι η σύγκριση γίνεται με βάση το μέσο ορο που μπορεί να μην 
διαιρει τα σημεία ακριβώς στα δυο. Πειραματικά αυτό δεν έχει αρνητικές επιπτώσεις στην απόδοση.
Όταν όλα τα Point τις λίστας έχουν την ίδια τιμή στη πρώτη διάσταση τότε μονο το κάθετο "υποδεντρο" δημιουργείται.
Στο κάθετο "ιποδεντρο" κάθε κόμβος χωρίζει τα Point σε δεξιά και αριστερά υποδεντρα με βάση σύγκριση με το
μέσο Point στην δεύτερη διάσταση.
Όταν όλα τα Point τις λίστας έχουν την ίδια τιμή στη δεύτερη διάσταση τότε δημιουργείται φίλο με όλα τα Point.

Αναζήτηση : Αναφέρω παρακάτω σημαίνει επιστρέφω το αποτέλεσμα τις αναζήτησης στο κάθετο ιποδεντρο.
Αρχικά βρίσκεται ο ανώτερος κόμβος που είναι εντός του range, που θα είναι ο ελάχιστος κοινός απόγονος
τον σημείων εντός του range. Από εκεί η αναζήτηση χωρίζεται στην αριστερή πλευρά, όπου το δεξί υποδεντρο αναφέρεται κάθε φορα
που το low είναι μικρότερο από τον κόμβο, και την δεξιά πλευρά όπου το συμμετρικό συμβαίνει.
Όταν μια από τις δυο πλευρές φτάσει σε κόμβο με μονο κάθετο υποδεντρο τον αναφέρει αν είναι εντός του range.
Στα κάθετα υποδεντρα η αναζήτηση γίνεται με παρόμοιο τρόπο αλλα μονο με αριστερό και δεξιό ιποδεντρο και με σύγκριση στην άλλη διάσταση.

R-Tree

Κατασκευή : Ο κόμβος παίρνει ως τιμή το MBR που περιλαμβάνει όλα τα Point τις λίστας.
Τα point ταξινομούνται με βάση την διάσταση στην οποια έχουν τις περισσότερες μοναδικές τιμές.
Έπειτα χωρίζονται σε όσα υποδεντρα όσο το ελάχιστο του αριθμού Point και του fanout. Όταν μονο ένα Point μένει
δημιουργείται φίλο.

Αναζήτηση : Επιστρέφεται η ένωση τις αναζήτησης σε όλα τα υποδεντρα που έχουν MBR που τέμνει το range.

Αξιολόγηση και σύγκριση

Αρχικά δημιουργείται ένα δέντρο κάθε τύπου από μια λίστα με 100 τυχαία Point. Σε κάθε δέντρο γίνεται ένας μεγάλος αριθμός από τυχαία queries
και μετριέται η απόδοση τους. Οι αναζητήσεις στα δέντρα αξιολογήθηκαν χωρίς το LSH καθώς αυτό παραμένει σταθερό σε κάθε περίπτωση.
Ο χρόνος που παίρνει το μέσο query σε κάθε δέντρο είναι:
355 μs 355 μs 364 μs 376 μs
Ποιο αναλυτικά στατιστικά βρίσκονται στο benchmarks.html (Οι χρόνοι εκεί αναφέρονται σε batches των 100 queries).

Testing

Οι 3 ιδιότητες που τεστάρονται είναι:
1. Κάθε Point που επιστρέφεται από αναζήτηση βρίσκεται εντός του range
2. Αναζήτηση με range που καλύπτει κάθε πιθανό σημείο επιστρέφει όλα τα
Point του δέντρου
3. Η αναζήτηση σε δέντρο επιστρέφει τα ίδια Point με το να ελέγχονται ένα-ένα για το
αν βρίσκονται εντός του range. Αυτή η ιδιότητα εγγυάται την ορθότητα και πληρότητα
τον αποτελεσμάτων.

Κάθε ιδιότητα ελέγχεται για κάθε τύπο δέντρου με 100 τυχαία παραγόμενα testcases.

LSH

Υπολογίζεται το hash κάθε λέξης με 100 διαφορετικά νούμερα.
Για κάθε νούμερο και κάθε έγγραφο υπολογίζεται το ελάχιστο hash
όλον τον λέξεων στο έγγραφο. Έτσι δημιουργείται το minhash matrix.
Ανά δυο οι τιμές σε κάθε στήλη του minhash matrix ενώνονται 
σε ένα hash. Το αποτέλεσμα είναι υπογραφές LSH με 50 bands και 2 γραμμές
ανά band. Οι τιμές 2 και 50 βρέθηκαν πειραματικά να έχουν αποδεκτή
απόδοση για jaccard similarity 20% σε σύγκριση με άλλες τιμές.
Στο LSH χρησιμοποιούνται 10000 κουβάδες.

Για κάθε γραμμή στο matrix τον υπογραφων τον επιστημόνων που "επεστρεσε"
η αναζήτηση στο δέντρο χρησιμοποιείται hashmap για να βρεθούν οι στήλες που
έχουν κοινά band. Επιστρέφεται κάθε ζεύγος που βρίσκεται με αυτόν τον τρόπο.
